<!doctype html>
<meta charset=us-ascii>
<title>Geomantic Chart Generator</title>
<style>
td{vertical-align:top}
</style>

<h1>Geomantic Chart Generator</h1>

<table>
<tr>
<td><label for=style>Style:</label>
<td><select id=style>
<option value=arabic>Arabic</option>
<option value=western>Western</option>
</select>

<tr>
<td><label for=type>Type:</label>
<td><select id=type>
<option value=shield>Shield</option>
<option value=house>House</option>
</select>

<tr>
<td><label for=m1>First Mother:</label>
<td><select id=m1>
<option>Populus</option>
<option>Laetitia</option>
<option>Rubeus</option>
<option>Fortuna Minor</option>
<option>Albus</option>
<option>Amissio</option>
<option>Conjunctio</option>
<option>Cauda Draconis</option>
<option>Tristitia</option>
<option>Carcer</option>
<option>Acquisitio</option>
<option>Puer</option>
<option>Fortuna Major</option>
<option>Puella</option>
<option>Caput Draconis</option>
<option>Via</option>
</select>

<tr>
<td><label for=m2>Second Mother:</label>
<td><select id=m2>
<option>Populus</option>
<option>Laetitia</option>
<option>Rubeus</option>
<option>Fortuna Minor</option>
<option>Albus</option>
<option>Amissio</option>
<option>Conjunctio</option>
<option>Cauda Draconis</option>
<option>Tristitia</option>
<option>Carcer</option>
<option>Acquisitio</option>
<option>Puer</option>
<option>Fortuna Major</option>
<option>Puella</option>
<option>Caput Draconis</option>
<option>Via</option>
</select>

<tr>
<td><label for=m3>Third Mother:</label>
<td><select id=m3>
<option>Populus</option>
<option>Laetitia</option>
<option>Rubeus</option>
<option>Fortuna Minor</option>
<option>Albus</option>
<option>Amissio</option>
<option>Conjunctio</option>
<option>Cauda Draconis</option>
<option>Tristitia</option>
<option>Carcer</option>
<option>Acquisitio</option>
<option>Puer</option>
<option>Fortuna Major</option>
<option>Puella</option>
<option>Caput Draconis</option>
<option>Via</option>
</select>

<tr>
<td><label for=m4>Fourth Mother:</label>
<td><select id=m4>
<option>Populus</option>
<option>Laetitia</option>
<option>Rubeus</option>
<option>Fortuna Minor</option>
<option>Albus</option>
<option>Amissio</option>
<option>Conjunctio</option>
<option>Cauda Draconis</option>
<option>Tristitia</option>
<option>Carcer</option>
<option>Acquisitio</option>
<option>Puer</option>
<option>Fortuna Major</option>
<option>Puella</option>
<option>Caput Draconis</option>
<option>Via</option>
</select>

<tr>
<td>Preview:
<td><img id=preview>

<tr>
<td>Image URL:<br>(Copy and Paste)
<td><textarea id=copypaste cols=100 rows=2 readOnly></textarea>
</table>
<p>v4 (9 Jul 2020)</p>
<script>
"use strict";

function reload() {
  // grab the form values
  const type = document.getElementById("type").value;
  const m1 = document.getElementById("m1").selectedIndex.toString(16);
  const m2 = document.getElementById("m2").selectedIndex.toString(16);
  const m3 = document.getElementById("m3").selectedIndex.toString(16);
  const m4 = document.getElementById("m4").selectedIndex.toString(16);
  const style = document.getElementById("style").value;
  const path = `${style}/${type}/${m1}${m2}/${m3}${m4}.svg`;

  // rewrite the preview
  const preview = document.getElementById("preview");
  preview.src = path;
  switch(type) {
    case "shield": preview.width = 326; preview.height = 166; break;
    case "house": preview.width = preview.height = 246; break;
  }

  // rewrite the Dreamwidth image URL
  const copypaste = document.getElementById("copypaste");
  copypaste.value = "https://shedivesin.github.io/emoji/" + path;
  copypaste.select();
}

// trigger a reload whenever the form is changed
for(const el of document.getElementsByTagName("select")) {
  el.addEventListener("input", reload);
}

// reload immediately
reload();
</script>
